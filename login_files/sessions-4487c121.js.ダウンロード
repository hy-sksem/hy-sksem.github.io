System.register(["./chunk-cookies.js","./chunk-vendor.js","./chunk-frameworks.js"],function(){"use strict";var g,y,i,l,T,d,w,f,j,_;return{setters:[function(o){g=o.g,y=o.d},function(o){i=o.o,l=o.r,T=o.e},function(o){d=o.A,w=o.r,f=o.I,j=o.b5,_=o.b6}],execute:function(){i(".js-transform-notice",{constructor:HTMLElement,add(e){const t=g("org_transform_notice");for(const n of t){const s=document.createElement("span");try{s.textContent=atob(decodeURIComponent(n.value)),y(n.key),e.appendChild(s),e.hidden=!1}catch{}return}}});var o=Object.defineProperty,m=(e,t)=>o(e,"name",{value:t,configurable:!0});function v(){document.body.classList.add("is-sending"),document.body.classList.remove("is-sent","is-not-sent")}m(v,"smsSending");function A(){document.body.classList.add("is-sent"),document.body.classList.remove("is-sending")}m(A,"smsSuccess");function E(e){e&&(document.querySelector(".js-sms-error").textContent=e),document.body.classList.add("is-not-sent"),document.body.classList.remove("is-sending")}m(E,"smsError"),l(".js-send-auth-code",async(e,t)=>{v();let n;try{n=await t.text()}catch(s){E(s.response.text)}n&&A()}),i(".js-two-factor-sms-fallback-button",function(e){e.addEventListener("toggle",function(t){const n=t.currentTarget;for(const s of n.querySelectorAll(".flash"))s instanceof HTMLElement&&(s.hidden=!0);n.querySelector(".js-configure-sms-fallback").hidden=!1,n.querySelector(".js-verify-sms-fallback").hidden=!0})}),l(".js-two-factor-set-sms-fallback",async(e,t)=>{let n;try{n=await t.text()}catch(s){const r=e.querySelector(".js-configure-sms-fallback"),c=e.querySelector(".js-verify-sms-fallback"),S=(r.hidden?c:r).querySelector(".flash");switch(s.response.status){case 422:case 429:S.textContent=s.response.text,S.hidden=!1}}if(n)switch(n.status){case 200:case 201:window.location.reload();break;case 202:e.querySelector(".js-configure-sms-fallback").hidden=!0,e.querySelector(".js-verify-sms-fallback").hidden=!1,e.querySelector(".js-fallback-otp").focus();break}}),d(".js-verification-code-input-auto-submit",function(e){const t=e.currentTarget,n=t.pattern||"[0-9]{6}";new RegExp(`^(${n})$`).test(t.value)&&w(t.form)});var L=Object.defineProperty,a=(e,t)=>L(e,"name",{value:t,configurable:!0});const P=3e3;function p(e){const t=document.querySelector("template.js-flash-template");t.after(new T(t,{className:"flash-error",message:e}))}a(p,"addFlashMessage");function h(){document.getElementById("github-mobile-two-factor-authenticate-prompt").hidden=!0,document.getElementById("github-mobile-two-factor-authenticate-error-and-retry").hidden=!1}a(h,"hidePromptAndShowErrorMessage");function k(){const e=new URL("",window.location.href);e.searchParams.set("redirect","true"),window.location.assign(e)}a(k,"approvedHandler");function R(){p("Sign-in request timed out."),h()}a(R,"expiredHandler");function q(){document.getElementById("github-mobile-two-factor-login-redirect").click()}a(q,"rejectedHandler");function b(){p("Two-factor authentication failed."),h()}a(b,"genericHandler");function U(e){return a(async function t(n){let s="STATUS_UNKNOWN";try{const c=document.getElementById("github-mobile-two-factor-authenticate-form").querySelector(".js-data-url-csrf"),u=await self.fetch(new Request(e,{method:"POST",mode:"same-origin",headers:{Accept:"application/json","Scoped-CSRF-Token":c.value,"X-Requested-With":"XMLHttpRequest"}}));u.ok?s=(await u.json()).status:s="STATUS_ERROR"}catch{s="STATUS_ERROR"}switch(s){case"STATUS_APPROVED":return k();case"STATUS_EXPIRED":return R();case"STATUS_ACTIVE":case"STATUS_ERROR":case"STATUS_UNKNOWN":break;case"STATUS_REJECTED":return q();case"STATUS_NOT_FOUND":case"STATUS_UNSUPPORTED":default:return b()}await new Promise(r=>setTimeout(r,P)),t()},"poll")(0)}a(U,"pollMobileAuthRequestStatus");async function I(e){try{await U(e.getAttribute("data-poll-url"))}catch{return b()}}a(I,"initializeMobileAuthRequestStatusPoll"),i(".js-poll-github-mobile-two-factor-authenticate",function(e){I(e)}),i(".js-webauthn-support",{constructor:HTMLInputElement,add(e){f(e,j())}}),i(".js-webauthn-iuvpaa-support",{constructor:HTMLInputElement,async add(e){f(e,await _())}}),d(".js-login-field",function(e){const t=e.target,n=t.closest("form");if(!n)return;const s=n.querySelector(".js-password-field"),r=n.querySelector(".js-sign-in-button");if(!s||!r)return;const c=t.value,u=["pj_nitin","up_the_irons"];c.includes("_")&&!c.includes("@")&&!u.includes(c)&&!c.endsWith("_admin")&&!(r.getAttribute("development")&&c.endsWith("_fab"))?(s.setAttribute("disabled","true"),r.value=r.getAttribute("data-sso-label")||" "):(s.removeAttribute("disabled"),r.value=r.getAttribute("data-signin-label")||" ")})}}});
//# sourceMappingURL=sessions-43abdba8.js.map
